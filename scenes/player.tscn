[gd_scene load_steps=30 format=3 uid="uid://btbeu0xdkpisq"]

[ext_resource type="Script" uid="uid://btnx0mtfnqeug" path="res://scripts/actors/player.gd" id="1_4flbx"]
[ext_resource type="Script" uid="uid://bjvp3kd6bmkho" path="res://scripts/components/movement_component.gd" id="2_g2els"]
[ext_resource type="Resource" uid="uid://ckjc1cdhkvxg6" path="res://resources/player/attack/player_light_attacks.tres" id="2_oprun"]
[ext_resource type="Script" uid="uid://beortrl7adiim" path="res://scripts/components/buffer_controller.gd" id="3_f1ej7"]
[ext_resource type="Script" uid="uid://qxnqp6qiqxw" path="res://scripts/components/hitbox.gd" id="3_qfm1y"]
[ext_resource type="Script" uid="uid://dus5o11ra71f" path="res://scripts/core/state_machine.gd" id="3_qhqgy"]
[ext_resource type="Script" uid="uid://c50xfgbngchgg" path="res://scripts/states/locomotion_state.gd" id="4_dqkch"]
[ext_resource type="Script" uid="uid://b32n8s4pkaq3b" path="res://scripts/components/health_component.gd" id="4_fulsm"]
[ext_resource type="Resource" uid="uid://bt3sgcgwjxve0" path="res://resources/player/default_locomotion.tres" id="5_qlg0r"]
[ext_resource type="Script" uid="uid://mqtxcxisr6ph" path="res://scripts/states/dodge_state.gd" id="6_tuyoq"]
[ext_resource type="Resource" uid="uid://cw10wx6p10d4y" path="res://resources/player/dodge/neutral.tres" id="7_fjrip"]
[ext_resource type="Resource" uid="uid://brr4qpn5yk0mn" path="res://resources/player/dodge/forward.tres" id="8_d2wvv"]
[ext_resource type="Resource" uid="uid://h5j4chnrxexj" path="res://resources/player/dodge/back.tres" id="9_3v2ag"]
[ext_resource type="Resource" uid="uid://cfu400oitmjxr" path="res://resources/player/dodge/up.tres" id="10_jej6c"]
[ext_resource type="Resource" uid="uid://cxtoyg6r5qy34" path="res://resources/player/dodge/down.tres" id="11_f1ej7"]
[ext_resource type="Script" uid="uid://c3f0ddxqxcn8k" path="res://scripts/states/attack_state.gd" id="12_jej6c"]
[ext_resource type="Script" uid="uid://cmjo1r3dy7y1a" path="res://scripts/listeners/animation_listener.gd" id="15_a8ls1"]
[ext_resource type="Script" uid="uid://nl1a7e12lrfa" path="res://scripts/listeners/sound_listener.gd" id="16_qfm1y"]
[ext_resource type="Script" uid="uid://hhcv8mh33t6y" path="res://scripts/components/stamina_component.gd" id="19_4r5pv"]
[ext_resource type="Script" uid="uid://6j164hqmaqt2" path="res://scripts/states/parry_state.gd" id="19_60mlk"]
[ext_resource type="Resource" uid="uid://b7kijgne205pc" path="res://resources/player/parry/default.tres" id="20_i4ail"]
[ext_resource type="Script" uid="uid://ba650tjbftjqi" path="res://scripts/states/parried_state.gd" id="21_4ni07"]
[ext_resource type="Script" uid="uid://m2bbkg5u3e8f" path="res://scripts/states/stagger_state.gd" id="22_l71n6"]
[ext_resource type="Resource" uid="uid://hoyhnn4kdadc" path="res://resources/player/stagger/default.tres" id="23_ke2ow"]
[ext_resource type="Script" uid="uid://b3auw1r8kc2yi" path="res://scripts/states/block_stun_state.gd" id="24_31cv2"]
[ext_resource type="Script" uid="uid://bbrgs7ayus45u" path="res://scripts/components/hurtbox.gd" id="24_l71n6"]
[ext_resource type="Resource" uid="uid://c13fhm2w824s2" path="res://resources/player/block/default.tres" id="25_pf23h"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_qc3e3"]
radius = 25.0
height = 64.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_4ni07"]
radius = 16.0
height = 64.0

[node name="Player" type="CharacterBody2D"]
script = ExtResource("1_4flbx")
attack_set = ExtResource("2_oprun")
neutral_dodge_profile = ExtResource("7_fjrip")
forward_dodge_profile = ExtResource("8_d2wvv")
back_dodge_profile = ExtResource("9_3v2ag")
up_dodge_profile = ExtResource("10_jej6c")
down_dodge_profile = ExtResource("11_f1ej7")

[node name="Camera2D" type="Camera2D" parent="."]
position_smoothing_enabled = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -16.0
offset_top = -32.0
offset_right = 16.0
offset_bottom = 32.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
shape = SubResource("CapsuleShape2D_qc3e3")

[node name="AttackHitbox" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 8
monitoring = false
script = ExtResource("3_qfm1y")

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackHitbox"]
disabled = true

[node name="SFXPlayer" type="AudioStreamPlayer2D" parent="."]

[node name="HoldInputTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="RunCancelTimer" type="Timer" parent="."]
wait_time = 0.15
one_shot = true

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("4_fulsm")

[node name="SoundListener" type="Node" parent="." node_paths=PackedStringArray("audio_player", "state_machine")]
script = ExtResource("16_qfm1y")
audio_player = NodePath("../SFXPlayer")
state_machine = NodePath("../StateMachine")

[node name="AnimationListener" type="Node" parent="." node_paths=PackedStringArray("animation_player", "state_machine")]
script = ExtResource("15_a8ls1")
animation_player = NodePath("../AnimationPlayer")
state_machine = NodePath("../StateMachine")

[node name="MovementComponent" type="Node" parent="."]
script = ExtResource("2_g2els")

[node name="BufferController" type="Node" parent="."]
script = ExtResource("3_f1ej7")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("3_qhqgy")

[node name="LocomotionState" type="Node" parent="StateMachine"]
script = ExtResource("4_dqkch")
locomotion_profile = ExtResource("5_qlg0r")

[node name="DodgeState" type="Node" parent="StateMachine"]
script = ExtResource("6_tuyoq")
neutral_dodge_profile = ExtResource("7_fjrip")
forward_dodge_profile = ExtResource("8_d2wvv")
back_dodge_profile = ExtResource("9_3v2ag")
up_dodge_profile = ExtResource("10_jej6c")
down_dodge_profile = ExtResource("11_f1ej7")

[node name="AttackState" type="Node" parent="StateMachine"]
script = ExtResource("12_jej6c")

[node name="ParryState" type="Node" parent="StateMachine"]
script = ExtResource("19_60mlk")
parry_profile = ExtResource("20_i4ail")
metadata/_custom_type_script = "uid://6j164hqmaqt2"

[node name="ParriedState" type="Node" parent="StateMachine"]
script = ExtResource("21_4ni07")
metadata/_custom_type_script = "uid://ba650tjbftjqi"

[node name="StaggerState" type="Node" parent="StateMachine"]
script = ExtResource("22_l71n6")
stagger_profile = ExtResource("23_ke2ow")
metadata/_custom_type_script = "uid://m2bbkg5u3e8f"

[node name="BlockStunState" type="Node" parent="StateMachine"]
script = ExtResource("24_31cv2")
block_stun_profile = ExtResource("25_pf23h")
metadata/_custom_type_script = "uid://b3auw1r8kc2yi"

[node name="StaminaComponent" type="Node" parent="."]
script = ExtResource("19_4r5pv")

[node name="DelayTimer" type="Timer" parent="StaminaComponent"]

[node name="Hurtbox" type="Area2D" parent="."]
visible = false
collision_layer = 32
collision_mask = 16
script = ExtResource("24_l71n6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
visible = false
shape = SubResource("CapsuleShape2D_4ni07")
